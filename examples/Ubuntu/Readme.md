# 	Ubuntu环境下读取Hi229/226数据

​	本文档介绍了如何在Ubuntu环境中读取Hi229/226 的数据，本路径提供了c语言例程代码，生成的可执行文件用于读取模块的数据。

​	测试环境：

​		Ubuntu 16.04

## 配置过程 ##

​	因为Ubuntu 系统自带CP210x的驱动，所以我们不用专门去安装相应串口驱动，Hi229/226的调试板输入热插拔设备，当我们用USB线，把调试版连接到电脑上时，会自动识别调试版设备。识别成功后，会在dev目录下出现一个对应的设备文件。

​	首先我们先进行一些准备工作：

​	1、打开ubuntu系统，按下 ctrl + alt + t 打开命令行窗口

​	2、在窗口上输入 :  

```shell
cd /dev
```

​		然后按下 Enter 键，这个命令是切换到dev目录下，这个目录下，都是一些设备文件，我们可以通过访问这些文件，就可以达到访问某些设备的目的。

​	3、然后在dev目录下执行：

```shell
ls
```

​			这个命令是查看当前目录下都有哪些文件，然后按下 Enter 键，就会出现一堆文件名称，在这些文件名称中，我们主要关心ttyUSB这个文件，这个文件名称后边还会跟着一个数字，这个数字就是USB设备号，由于ubuntu USB设备号为从零开始依次累加，所以多个设备每次开机后设备号是不固定的，我们需要确定设备的设备号。下面我用两张图片来描述

![](.\img\1.png)

这是没有插入USB设备的情况，我们发现，这个时候，dev目录下并没有名为__ttyUSB__文件，接下来我们插入USB线，连接调试板，然后我们再次执行：

```shell
ls
```

​	这个时候，我们发现dev目录下多了几个文件名称，先上图：

![](.\img\2.jpg)

其他的文件名我们先不用管，只关心用红线画起来的“__ttyUSB0__”，这个文件就是我们的调试版在ubuntu系统中生成的设备文件，我们对它进行读写，就可以完成串口通信。这个文件名称我们把它记下来，后边我们会用到，很重要。当然有的时候，可能是ttyUSB1，或者是ttyUSB2，甚至是更大的数，都有可能。

​	接下来，我们开始在Ubuntu环境下生成一个可执行文件，专门用来解析模块的数据。

首先在Ubuntu系统中，按下 __ctrl + alt + t__ 快捷键，在弹出的窗口上，执行：

```shell
mkdir hipnuc
```

表示在当前文件夹下，创建了一个名为__hipnuc__的文件夹，然后我们再执行:

```shell
cd hipnuc
```

表示进入__hipnuc__的目录,然后把本文档所在目录下的 __*.c__  、__*.h__   和  __Makefile__ 文件,复制到__hipnuc__目录中。

然后执行：

```shell
ls
```

查看复制文件操作是否成功。如果成功，就会出现六个文件。

然后执行：

```shell
make
```

执行成功后，没有任何提示，然后执行：

```shell
ls
```

查看生成的可执行文件__main__,接下来我们就执行这个文件：

```shell
sudo ./main ttyUSB0
```

 执行成功后，会出现这个画面：

![](.\img\3.png)

这个画面上的数字会随着模块位置的改变而发生变化。

如果失败，会出现这个错误：

![](.\img\4 (2).png)

这个时候我们需要重新确认设备的端口号，检查在输入执行命令的时候，端口号是否输入正确。